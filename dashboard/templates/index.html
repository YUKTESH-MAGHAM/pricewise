<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Food Pricing Engine</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

  <!-- â”€â”€ NAVBAR â”€â”€ -->
  <nav class="navbar">
    <div class="nav-inner">
      <div class="nav-logo">ğŸ½ï¸ <span>PriceWise</span></div>
      <ul class="nav-links">
        <li><a href="#search">Find Deals</a></li>
        <li><a href="#how">How It Works</a></li>
        <li><a href="#about">About</a></li>
      </ul>
    </div>
  </nav>

  <!-- â”€â”€ HERO â”€â”€ -->
  <section class="hero">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1>Find the <span>Cheapest</span><br>Restaurant Deal</h1>
      <p>Compare prices across Swiggy & Zomato instantly.<br>Stop overpaying â€” let us find the best price for you.</p>
      <div class="hero-btns">
        <a href="#search" class="btn-primary">Find Best Price</a>
        <a href="#how" class="btn-outline">How It Works</a>
      </div>
    </div>
    <div class="hero-scroll">
      <div class="scroll-icon"></div>
    </div>
  </section>

  <!-- â”€â”€ SEARCH SECTION â”€â”€ -->
  <section class="search-section" id="search">
    <div class="section-header">
      <h2>Search <span>Best Deals</span></h2>
      <p>Select your dish and budget â€” we'll find the cheapest option across platforms</p>
    </div>

    <div class="search-card">
      <form method="POST" id="search-form">

        <div class="form-row">
          <div class="field-group">
            <label>ğŸ´ Choose Your Dish</label>
            <div class="select-wrap">
              <select name="dish" id="dish">
                {% for d in dishes %}
                <option value="{{d}}">{{d}}</option>
                {% endfor %}
              </select>
              <span class="chevron">â–¾</span>
            </div>
          </div>

          <div class="field-group">
            <label>ğŸ½ï¸ Choose Restaurant (Optional)</label>
            <div class="select-wrap">
              <select name="restaurant" id="restaurant">
                <option value="All">All Restaurants</option>
                {% for r in restaurants %}
                <option value="{{r}}">{{r}}</option>
                {% endfor %}
              </select>
              <span class="chevron">â–¾</span>
            </div>
          </div>

          <div class="field-group">
            <label>ğŸ’° Your Budget Range</label>
            <div class="budget-pills">
              <div class="budget-pill">â‚¹<span id="minValue">100</span></div>
              <span class="to-label">to</span>
              <div class="budget-pill">â‚¹<span id="maxValue">400</span></div>
            </div>
            <div class="slider-wrap">
              <div class="slider-track"></div>
              <div class="slider-fill" id="sliderFill"></div>
              <input type="range" id="minSlider" name="min_price" min="50" max="500" value="100">
              <input type="range" id="maxSlider" name="max_price" min="50" max="500" value="400">
            </div>
            <div class="slider-labels"><span>â‚¹50</span><span>â‚¹500</span></div>
          </div>
        </div>

        <button type="submit" class="search-btn">
          <span class="btn-text">Find Best Restaurants</span>
          <span>â†’</span>
        </button>

      </form>
    </div>

    <!-- WINNER -->
    {% if result %}
    <div class="winner-banner animate-in">
      <div class="winner-left">
        <div class="winner-crown">ğŸ†</div>
        <div>
          <div class="winner-label">Best Deal Found!</div>
          <div class="winner-name">{{ result.restaurant }}</div>
          <div class="winner-sub">Order on <strong>{{ result.platform }}</strong> for the best price</div>
        </div>
      </div>
      <div class="winner-right">
        <div class="winner-price">â‚¹{{ result.price }}</div>
        <div class="platform-compare">
          <a href="{{ result.swiggy_url }}" target="_blank"
            class="plat {% if result.platform == 'Swiggy' %}best{% endif %}">
            <span>ğŸŸ  Swiggy</span><strong>â‚¹{{ result.swiggy }}</strong>
          </a>
          <a href="{{ result.zomato_url }}" target="_blank"
            class="plat {% if result.platform == 'Zomato' %}best{% endif %}">
            <span>ğŸ”´ Zomato</span><strong>â‚¹{{ result.zomato }}</strong>
          </a>
        </div>
      </div>
    </div>
    {% endif %}

    <!-- FALLBACK WINNER -->
    {% if fallback_result and not result and min_price and max_price %}
    <div class="winner-banner fallback-banner animate-in" style="border-left-color: #777;">
      <div class="winner-left">
        <div class="winner-crown" style="filter: grayscale(1);">ğŸ¤·</div>
        <div>
          <div class="winner-label" style="color: #777;">
            {% if max_price < fallback_result.price %} Budget too low! Cheapest found: {% elif min_price>
              fallback_result.price %}
              Cheaper than budget limit! Nearest to min budget:
              {% else %}
              No exact matches in budget. Showing nearest:
              {% endif %}
          </div>
          <div class="winner-name">{{ fallback_result.restaurant }}</div>
          <div class="winner-sub">Order on <strong>{{ fallback_result.platform }}</strong></div>
        </div>
      </div>
      <div class="winner-right">
        <div class="winner-price" style="color: var(--dark);">â‚¹{{ fallback_result.price }}</div>
        <div class="platform-compare">
          <a href="{{ fallback_result.swiggy_url }}" target="_blank"
            class="plat {% if fallback_result.platform == 'Swiggy' %}best{% endif %}"
            style="{% if fallback_result.platform == 'Swiggy' %}background: #eee; color: var(--dark);{% endif %}">
            <span>ğŸŸ  Swiggy</span><strong>â‚¹{{ fallback_result.swiggy }}</strong>
          </a>
          <a href="{{ fallback_result.zomato_url }}" target="_blank"
            class="plat {% if fallback_result.platform == 'Zomato' %}best{% endif %}"
            style="{% if fallback_result.platform == 'Zomato' %}background: #eee; color: var(--dark);{% endif %}">
            <span>ğŸ”´ Zomato</span><strong>â‚¹{{ fallback_result.zomato }}</strong>
          </a>
        </div>
      </div>
    </div>
    {% endif %}

    <!-- ALL RESULTS -->
    {% if matches %}
    <div class="results-section animate-in">
      <div class="results-header">
        <h3>All Matching Restaurants <span class="badge">{{ matches | length }} found</span></h3>
      </div>
      <div class="cards-grid">
        {% for m in matches %}
        <div class="result-card {% if loop.index == 1 %}top-card{% endif %}">
          {% if loop.index == 1 %}<div class="top-tag">â˜… Best Deal</div>{% endif %}
          <div class="card-rank">#{{ loop.index }}</div>
          <div class="card-name">{{ m.restaurant }}</div>
          <div class="card-platform {{ m.platform | lower | replace(' ', '-') }}">{{ m.platform }}</div>
          <div class="card-prices">
            <a href="{{ m.swiggy_url }}" target="_blank"
              class="price-row {% if m.platform == 'Swiggy' %}active-price{% endif %}">
              ğŸŸ  Swiggy <strong>â‚¹{{ m.swiggy }}</strong>
            </a>
            <a href="{{ m.zomato_url }}" target="_blank"
              class="price-row {% if m.platform == 'Zomato' %}active-price{% endif %}">
              ğŸ”´ Zomato <strong>â‚¹{{ m.zomato }}</strong>
            </a>
          </div>
          <div class="card-footer">
            <span class="best-price">Best: â‚¹{{ m.price }}</span>
            <a href="{{ m.swiggy_url if m.platform == 'Swiggy' else m.zomato_url }}" target="_blank"
              class="order-on {{ m.platform | lower | replace(' ', '-') }}">
              Order on {{ m.platform }} â†’
            </a>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

  </section>

  <!-- â”€â”€ HOW IT WORKS â”€â”€ -->
  <section class="how-section" id="how">
    <div class="section-header">
      <h2>How It <span>Works</span></h2>
      <p>Three simple steps to save money on every order</p>
    </div>
    <div class="steps-grid">
      <div class="step-card">
        <div class="step-icon">ğŸœ</div>
        <div class="step-num">01</div>
        <h4>Pick Your Dish</h4>
        <p>Select from our wide range of popular dishes available across restaurants</p>
      </div>
      <div class="step-card">
        <div class="step-icon">ğŸ’¸</div>
        <div class="step-num">02</div>
        <h4>Set Your Budget</h4>
        <p>Use the price range slider to filter results within your spending limit</p>
      </div>
      <div class="step-card">
        <div class="step-icon">ğŸ†</div>
        <div class="step-num">03</div>
        <h4>Get Best Deal</h4>
        <p>We instantly compare Swiggy & Zomato and show you the cheapest option</p>
      </div>
    </div>
  </section>

  <!-- â”€â”€ ABOUT â”€â”€ -->
  <section class="about-section" id="about">
    <div class="about-inner">
      <div class="about-text">
        <h2>Our <span>Story</span></h2>
        <p>Tired of switching between apps to find the best price? PriceWise was built to solve exactly that. We compare
          real-time prices across Swiggy and Zomato so you never overpay for your favourite meal.</p>
        <p>Our smart pricing engine analyses thousands of restaurant listings to surface the best deal â€” in seconds.</p>
        <div class="stats-row">
          <div class="stat">
            <div class="stat-num">2K+</div>
            <div class="stat-label">Dishes Tracked</div>
          </div>
          <div class="stat">
            <div class="stat-num">2</div>
            <div class="stat-label">Platforms Compared</div>
          </div>
          <div class="stat">
            <div class="stat-num">100%</div>
            <div class="stat-label">Free to Use</div>
          </div>
        </div>
      </div>
      <div class="about-image">
        <div class="image-card">
          <div class="image-placeholder">ğŸ›</div>
          <div class="floating-badge">Save up to<br><strong>40%</strong></div>
        </div>
      </div>
    </div>
  </section>

  <!-- â”€â”€ FOOTER â”€â”€ -->
  <footer class="footer">
    <div class="footer-inner">
      <div class="footer-col">
        <div class="footer-logo">ğŸ½ï¸ PriceWise</div>
        <p>The smartest way to order food without breaking your budget.</p>
      </div>
      <div class="footer-col">
        <h5>Platforms</h5>
        <ul>
          <li>ğŸŸ  Swiggy</li>
          <li>ğŸ”´ Zomato</li>
        </ul>
      </div>
      <div class="footer-col">
        <h5>Quick Links</h5>
        <ul>
          <li><a href="#search">Find Deals</a></li>
          <li><a href="#how">How It Works</a></li>
          <li><a href="#about">About</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>Built with â¤ï¸ for smart food lovers Â· PriceWise Â© 2025</p>
    </div>
  </footer>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>